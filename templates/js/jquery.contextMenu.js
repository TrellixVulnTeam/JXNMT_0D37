(function(e){if(typeof define==='function'&&define.amd){define(['jquery'],e)}
else if(typeof exports==='object'){e(require('jquery'))}
else{e(jQuery)}})(function(e){'use strict';e.support.htmlMenuitem=('HTMLMenuItemElement' in window);e.support.htmlCommand=('HTMLCommandElement' in window);e.support.eventSelectstart=('onselectstart' in document.documentElement);if(!e.ui||!e.widget){e.cleanData=(function(t){return function(n){var o,s,i;for(i=0;n[i]!=null;i++){s=n[i];try{o=e._data(s,'events');if(o&&o.remove){e(s).triggerHandler('remove')}}catch(a){}};t(n)}})(e.cleanData)};var n=null,l=!1,s=e(window),u=0,c={},a={},d={},f={selector:null,appendTo:null,trigger:'right',autoHide:!1,delay:200,reposition:!0,classNames:{hover:'context-menu-hover',disabled:'context-menu-disabled',visible:'context-menu-visible',notSelectable:'context-menu-not-selectable',icon:'context-menu-icon',iconEdit:'context-menu-icon-edit',iconCut:'context-menu-icon-cut',iconCopy:'context-menu-icon-copy',iconPaste:'context-menu-icon-paste',iconDelete:'context-menu-icon-delete',iconAdd:'context-menu-icon-add',iconQuit:'context-menu-icon-quit'},determinePosition:function(t){if(e.ui&&e.ui.position){t.css('display','block').position({my:'center top',at:'center bottom',of:this,offset:'0 5',collision:'fit'}).css('display','none')}
else{var n=this.offset();n.top+=this.outerHeight();n.left+=this.outerWidth()/2-t.outerWidth()/2;t.css(n)}},position:function(e,t,a){var n;if(!t&&!a){e.determinePosition.call(this,e.$menu);return}
else if(t==='maintain'&&a==='maintain'){n=e.$menu.position()}
else{n={top:a,left:t}};var c=s.scrollTop()+s.height(),r=s.scrollLeft()+s.width(),i=e.$menu.outerHeight(),o=e.$menu.outerWidth();if(n.top+i>c){n.top-=i};if(n.top<0){n.top=0};if(n.left+o>r){n.left-=o};if(n.left<0){n.left=0};e.$menu.css(n)},positionSubmenu:function(t){if(e.ui&&e.ui.position){t.css('display','block').position({my:'left top',at:'right top',of:this,collision:'flipfit fit'}).css('display','')}
else{var n={top:0,left:this.outerWidth()};t.css(n)}},zIndex:1,animation:{duration:50,show:'slideDown',hide:'slideUp'},events:{show:e.noop,hide:e.noop},callback:null,items:{}},i={timer:null,pageX:null,pageY:null},p=function(e){var n=0,t=e;while(!0){n=Math.max(n,parseInt(t.css('z-index'),10)||0);t=t.parent();if(!t||!t.length||'html body'.indexOf(t.prop('nodeName').toLowerCase())>-1){break}};return n},t={abortevent:function(e){e.preventDefault();e.stopImmediatePropagation()},contextmenu:function(t){var s=e(this);if(t.data.trigger.indexOf('right')>=0||t.data.trigger.indexOf('left')>=0){t.preventDefault();t.stopImmediatePropagation()};if((t.data.trigger.indexOf('right')<0&&t.data.trigger.indexOf('demand')<0)&&t.originalEvent){return};if(t.mouseButton!==undefined&&t.data){if(!(t.data.trigger.indexOf('left')>=0&&t.mouseButton===0)&&!(t.data.trigger.indexOf('right')>=0&&t.mouseButton===2)){return}};if(s.hasClass('context-menu-active')){return};if(!s.hasClass('context-menu-disabled')){n=s;if(t.data.build){var r=t.data.build(n,t);if(r===!1){return};t.data=e.extend(!0,{},f,t.data,r||{});if(!t.data.items||e.isEmptyObject(t.data.items)){if(window.console){(console.error||console.log).call(console,'No items specified to show in contextMenu')};throw new Error('No Items specified')};t.data.$trigger=n;o.create(t.data)};var c=!1;for(var a in t.data.items){if(t.data.items.hasOwnProperty(a)){var i;if(e.isFunction(t.data.items[a].visible)){i=t.data.items[a].visible.call(e(t.currentTarget),a,t.data)}
else if(typeof a.visible!=='undefined'){i=t.data.items[a].visible===!0}
else{i=!0};if(i){c=!0}}};if(c){o.show.call(s,t.data,t.pageX,t.pageY)}}},click:function(t){t.preventDefault();t.stopImmediatePropagation();e(this).trigger(e.Event('contextmenu',{data:t.data,pageX:t.pageX,pageY:t.pageY}))},mousedown:function(t){var a=e(this);if(n&&n.length&&!n.is(a)){n.data('contextMenu').$menu.trigger('contextmenu:hide')};if(t.button===2){n=a.data('contextMenuActive',!0)}},mouseup:function(t){var a=e(this);if(a.data('contextMenuActive')&&n&&n.length&&n.is(a)&&!a.hasClass('context-menu-disabled')){t.preventDefault();t.stopImmediatePropagation();n=a;a.trigger(e.Event('contextmenu',{data:t.data,pageX:t.pageX,pageY:t.pageY}))};a.removeData('contextMenuActive')},mouseenter:function(a){var o=e(this),s=e(a.relatedTarget),c=e(document);if(s.is('.context-menu-list')||s.closest('.context-menu-list').length){return};if(n&&n.length){return};i.pageX=a.pageX;i.pageY=a.pageY;i.data=a.data;c.on('mousemove.contextMenuShow',t.mousemove);i.timer=setTimeout(function(){i.timer=null;c.off('mousemove.contextMenuShow');n=o;o.trigger(e.Event('contextmenu',{data:i.data,pageX:i.pageX,pageY:i.pageY}))},a.data.delay)},mousemove:function(e){i.pageX=e.pageX;i.pageY=e.pageY},mouseleave:function(t){var a=e(t.relatedTarget);if(a.is('.context-menu-list')||a.closest('.context-menu-list').length){return};try{clearTimeout(i.timer)}catch(n){};i.timer=null},layerClick:function(t){var l=e(this),n=l.data('contextMenuRoot'),r=t.button,o=t.pageX,c=t.pageY,i,a;t.preventDefault();t.stopImmediatePropagation();setTimeout(function(){var l,u=((n.trigger.indexOf('left')>=0&&r===0)||(n.trigger.indexOf('right')>=0&&r===2));if(document.elementFromPoint&&n.$layer){n.$layer.hide();i=document.elementFromPoint(o-s.scrollLeft(),c-s.scrollTop());n.$layer.show()};if(n.reposition&&u){if(document.elementFromPoint){if(n.$trigger.is(i)||n.$trigger.has(i).length){n.position.call(n.$trigger,n,o,c);return}}
else{a=n.$trigger.offset();l=e(window);a.top+=l.scrollTop();if(a.top<=t.pageY){a.left+=l.scrollLeft();if(a.left<=t.pageX){a.bottom=a.top+n.$trigger.outerHeight();if(a.bottom>=t.pageY){a.right=a.left+n.$trigger.outerWidth();if(a.right>=t.pageX){n.position.call(n.$trigger,n,o,c);return}}}}}};if(i&&u){n.$trigger.one('contextmenu:hidden',function(){e(i).contextMenu({x:o,y:c,button:r})})};if(n!=null&&n.$menu!=null){n.$menu.trigger('contextmenu:hide')}},50)},keyStop:function(e,t){if(!t.isInput){e.preventDefault()};e.stopPropagation()},key:function(e){var a={};if(n){a=n.data('contextMenu')||{}};if(a.zIndex===undefined){a.zIndex=0};var c=0,s=function(e){if(e.style.zIndex!==''){c=e.style.zIndex}
else{if(e.offsetParent!==null&&e.offsetParent!==undefined){s(e.offsetParent)}
else if(e.parentElement!==null&&e.parentElement!==undefined){s(e.parentElement)}}};s(e.target);if(c>a.zIndex){return};switch(e.keyCode){case 9:case 38:t.keyStop(e,a);if(a.isInput){if(e.keyCode===9&&e.shiftKey){e.preventDefault();if(a.$selected){a.$selected.find('input, textarea, select').blur()};a.$menu.trigger('prevcommand');return}
else if(e.keyCode===38&&a.$selected.find('input, textarea, select').prop('type')==='checkbox'){e.preventDefault();return}}
else if(e.keyCode!==9||e.shiftKey){a.$menu.trigger('prevcommand');return};break;case 40:t.keyStop(e,a);if(a.isInput){if(e.keyCode===9){e.preventDefault();if(a.$selected){a.$selected.find('input, textarea, select').blur()};a.$menu.trigger('nextcommand');return}
else if(e.keyCode===40&&a.$selected.find('input, textarea, select').prop('type')==='checkbox'){e.preventDefault();return}}
else{a.$menu.trigger('nextcommand');return};break;case 37:t.keyStop(e,a);if(a.isInput||!a.$selected||!a.$selected.length){break};if(!a.$selected.parent().hasClass('context-menu-root')){var r=a.$selected.parent().parent();a.$selected.trigger('contextmenu:blur');a.$selected=r;return};break;case 39:t.keyStop(e,a);if(a.isInput||!a.$selected||!a.$selected.length){break};var o=a.$selected.data('contextMenu')||{};if(o.$menu&&a.$selected.hasClass('context-menu-submenu')){a.$selected=null;o.$selected=null;o.$menu.trigger('nextcommand');return};break;case 35:case 36:if(a.$selected&&a.$selected.find('input, textarea, select').length){return}
else{(a.$selected&&a.$selected.parent()||a.$menu).children(':not(.'+a.classNames.disabled+', .'+a.classNames.notSelectable+')')[e.keyCode===36?'first':'last']().trigger('contextmenu:focus');e.preventDefault();return};break;case 13:t.keyStop(e,a);if(a.isInput){if(a.$selected&&!a.$selected.is('textarea, select')){e.preventDefault();return};break};if(typeof a.$selected!=='undefined'&&a.$selected!==null){a.$selected.trigger('mouseup')};return;case 32:case 33:case 34:t.keyStop(e,a);return;case 27:t.keyStop(e,a);a.$menu.trigger('contextmenu:hide');return;default:var i=(String.fromCharCode(e.keyCode)).toUpperCase();if(a.accesskeys&&a.accesskeys[i]){a.accesskeys[i].$node.trigger(a.accesskeys[i].$menu?'contextmenu:focus':'mouseup');return};break};e.stopPropagation();if(typeof a.$selected!=='undefined'&&a.$selected!==null){a.$selected.trigger(e)}},prevItem:function(n){n.stopPropagation();var i=e(this).data('contextMenu')||{};var c=e(this).data('contextMenuRoot')||{};if(i.$selected){var l=i.$selected;i=i.$selected.parent().data('contextMenu')||{};i.$selected=l};var s=i.$menu.children(),a=!i.$selected||!i.$selected.prev().length?s.last():i.$selected.prev(),r=a;while(a.hasClass(c.classNames.disabled)||a.hasClass(c.classNames.notSelectable)||a.is(':hidden')){if(a.prev().length){a=a.prev()}
else{a=s.last()};if(a.is(r)){return}};if(i.$selected){t.itemMouseleave.call(i.$selected.get(0),n)};t.itemMouseenter.call(a.get(0),n);var o=a.find('input, textarea, select');if(o.length){o.focus()}},nextItem:function(n){n.stopPropagation();var i=e(this).data('contextMenu')||{};var c=e(this).data('contextMenuRoot')||{};if(i.$selected){var l=i.$selected;i=i.$selected.parent().data('contextMenu')||{};i.$selected=l};var s=i.$menu.children(),a=!i.$selected||!i.$selected.next().length?s.first():i.$selected.next(),r=a;while(a.hasClass(c.classNames.disabled)||a.hasClass(c.classNames.notSelectable)||a.is(':hidden')){if(a.next().length){a=a.next()}
else{a=s.first()};if(a.is(r)){return}};if(i.$selected){t.itemMouseleave.call(i.$selected.get(0),n)};t.itemMouseenter.call(a.get(0),n);var o=a.find('input, textarea, select');if(o.length){o.focus()}},focusInput:function(){var t=e(this).closest('.context-menu-item'),n=t.data(),a=n.contextMenu,i=n.contextMenuRoot;i.$selected=a.$selected=t;i.isInput=a.isInput=!0},blurInput:function(){var n=e(this).closest('.context-menu-item'),t=n.data(),a=t.contextMenu,i=t.contextMenuRoot;i.isInput=a.isInput=!1},menuMouseenter:function(){var t=e(this).data().contextMenuRoot;t.hovering=!0},menuMouseleave:function(t){var n=e(this).data().contextMenuRoot;if(n.$layer&&n.$layer.is(t.relatedTarget)){n.hovering=!1}},itemMouseenter:function(t){var a=e(this),o=a.data(),i=o.contextMenu,n=o.contextMenuRoot;n.hovering=!0;if(t&&n.$layer&&n.$layer.is(t.relatedTarget)){t.preventDefault();t.stopImmediatePropagation()}(i.$menu?i:n).$menu.children('.'+n.classNames.hover).trigger('contextmenu:blur').children('.hover').trigger('contextmenu:blur');if(a.hasClass(n.classNames.disabled)||a.hasClass(n.classNames.notSelectable)){i.$selected=null;return};a.trigger('contextmenu:focus')},itemMouseleave:function(t){var i=e(this),o=i.data(),a=o.contextMenu,n=o.contextMenuRoot;if(n!==a&&n.$layer&&n.$layer.is(t.relatedTarget)){if(typeof n.$selected!=='undefined'&&n.$selected!==null){n.$selected.trigger('contextmenu:blur')};t.preventDefault();t.stopImmediatePropagation();n.$selected=a.$selected=a.$node;return};i.trigger('contextmenu:blur')},itemClick:function(t){var r=e(this),s=r.data(),i=s.contextMenu,n=s.contextMenuRoot,a=s.contextMenuKey,c;if(!i.items[a]||r.is('.'+n.classNames.disabled+', .context-menu-submenu, .context-menu-separator, .'+n.classNames.notSelectable)){return};t.preventDefault();t.stopImmediatePropagation();if(e.isFunction(i.callbacks[a])&&Object.prototype.hasOwnProperty.call(i.callbacks,a)){c=i.callbacks[a]}
else if(e.isFunction(n.callback)){c=n.callback}
else{return};if(c.call(n.$trigger,a,n)!==!1){n.$menu.trigger('contextmenu:hide')}
else if(n.$menu.parent().length){o.update.call(n.$trigger,n)}},inputClick:function(e){e.stopImmediatePropagation()},hideMenu:function(t,n){var a=e(this).data('contextMenuRoot');o.hide.call(a.$trigger,a,n&&n.force)},focusItem:function(t){t.stopPropagation();var a=e(this),o=a.data(),i=o.contextMenu,n=o.contextMenuRoot;if(a.hasClass(n.classNames.disabled)||a.hasClass(n.classNames.notSelectable)){return};a.addClass([n.classNames.hover,n.classNames.visible].join(' ')).parent().find('.context-menu-item').not(a).removeClass(n.classNames.visible).filter('.'+n.classNames.hover).trigger('contextmenu:blur');i.$selected=n.$selected=a;if(i.$node){n.positionSubmenu.call(i.$node,i.$menu)}},blurItem:function(t){t.stopPropagation();var n=e(this),a=n.data(),i=a.contextMenu,o=a.contextMenuRoot;if(i.autoHide){n.removeClass(o.classNames.visible)};n.removeClass(o.classNames.hover);i.$selected=null}},o={show:function(a,i,r){var s=e(this),c={};e('#context-menu-layer').trigger('mousedown');a.$trigger=s;if(a.events.show.call(s,a)===!1){n=null;return};o.update.call(s,a);a.position.call(s,a,i,r);if(a.zIndex){var l=a.zIndex;if(typeof a.zIndex==='function'){l=a.zIndex.call(s,a)};c.zIndex=p(s)+l};o.layer.call(a.$menu,a,c.zIndex);a.$menu.find('ul').css('zIndex',c.zIndex+1);a.$menu.css(c)[a.animation.show](a.animation.duration,function(){s.trigger('contextmenu:visible')});s.data('contextMenu',a).addClass('context-menu-active');e(document).off('keydown.contextMenu').on('keydown.contextMenu',t.key);if(a.autoHide){e(document).on('mousemove.contextMenuAutoHide',function(e){var t=s.offset();t.right=t.left+s.outerWidth();t.bottom=t.top+s.outerHeight();if(a.$layer&&!a.hovering&&(!(e.pageX>=t.left&&e.pageX<=t.right)||!(e.pageY>=t.top&&e.pageY<=t.bottom))){setTimeout(function(){if(!a.hovering&&a.$menu!=null){a.$menu.trigger('contextmenu:hide')}},50)}})}},hide:function(t,a){var o=e(this);if(!t){t=o.data('contextMenu')||{}};if(!a&&t.events&&t.events.hide.call(o,t)===!1){return};o.removeData('contextMenu').removeClass('context-menu-active');if(t.$layer){setTimeout((function(e){return function(){e.remove()}})(t.$layer),10);try{delete t.$layer}catch(i){t.$layer=null}};n=null;t.$menu.find('.'+t.classNames.hover).trigger('contextmenu:blur');t.$selected=null;t.$menu.find('.'+t.classNames.visible).removeClass(t.classNames.visible);e(document).off('.contextMenuAutoHide').off('keydown.contextMenu');if(t.$menu){t.$menu[t.animation.hide](t.animation.duration,function(){if(t.build){t.$menu.remove();e.each(t,function(e){switch(e){case'ns':case'selector':case'build':case'trigger':return!0;default:t[e]=undefined;try{delete t[e]}catch(n){};return!0}})};setTimeout(function(){o.trigger('contextmenu:hidden')},10)})}},create:function(n,a){if(a===undefined){a=n};n.$menu=e('<ul class="context-menu-list"></ul>').addClass(n.className||'').data({'contextMenu':n,'contextMenuRoot':a});e.each(['callbacks','commands','inputs'],function(e,t){n[t]={};if(!a[t]){a[t]={}}});if(!a.accesskeys){a.accesskeys={}};function i(t){var n=e('<span></span>');if(t._accesskey){if(t._beforeAccesskey){n.append(document.createTextNode(t._beforeAccesskey))};e('<span></span>').addClass('context-menu-accesskey').text(t._accesskey).appendTo(n);if(t._afterAccesskey){n.append(document.createTextNode(t._afterAccesskey))}}
else{if(t.isHtmlName){if(typeof t.accesskey!=='undefined'){throw new Error('accesskeys are not compatible with HTML names and cannot be used together in the same item')};n.html(t.name)}
else{n.text(t.name)}};return n};e.each(n.items,function(c,s){var r=e('<li class="context-menu-item"></li>').addClass(s.className||''),u=null,l=null;r.on('click',e.noop);if(typeof s==='string'||s.type==='cm_separator'){s={type:'cm_seperator'}};s.$node=r.data({'contextMenu':n,'contextMenuRoot':a,'contextMenuKey':c});if(typeof s.accesskey!=='undefined'){var x=h(s.accesskey);for(var p=0,m;m=x[p];p++){if(!a.accesskeys[m]){a.accesskeys[m]=s;var f=s.name.match(new RegExp('^(.*?)('+m+')(.*)$','i'));if(f){s._beforeAccesskey=f[1];s._accesskey=f[2];s._afterAccesskey=f[3]};break}}};if(s.type&&d[s.type]){d[s.type].call(r,s,n,a);e.each([n,a],function(t,a){a.commands[c]=s;if(e.isFunction(s.callback)&&(a.callbacks[c]===undefined||n.type===undefined)){a.callbacks[c]=s.callback}})}
else{if(s.type==='cm_seperator'){r.addClass('context-menu-separator '+a.classNames.notSelectable)}
else if(s.type==='html'){r.addClass('context-menu-html '+a.classNames.notSelectable)}
else if(s.type){u=e('<label></label>').appendTo(r);i(s).appendTo(u);r.addClass('context-menu-input');n.hasTypes=!0;e.each([n,a],function(e,t){t.commands[c]=s;t.inputs[c]=s})}
else if(s.items){s.type='sub'};switch(s.type){case'cm_seperator':break;case'text':l=e('<input type="text" value="1" name="" value="">').attr('name','context-menu-input-'+c).val(s.value||'').appendTo(u);break;case'textarea':l=e('<textarea name=""></textarea>').attr('name','context-menu-input-'+c).val(s.value||'').appendTo(u);if(s.height){l.height(s.height)};break;case'checkbox':l=e('<input type="checkbox" value="1" name="" value="">').attr('name','context-menu-input-'+c).val(s.value||'').prop('checked',!!s.selected).prependTo(u);break;case'radio':l=e('<input type="radio" value="1" name="" value="">').attr('name','context-menu-input-'+s.radio).val(s.value||'').prop('checked',!!s.selected).prependTo(u);break;case'select':l=e('<select name="">').attr('name','context-menu-input-'+c).appendTo(u);if(s.options){e.each(s.options,function(t,n){e('<option></option>').val(t).text(n).appendTo(l)});l.val(s.selected)};break;case'sub':i(s).appendTo(r);s.appendTo=s.$node;o.create(s,a);r.data('contextMenu',s).addClass('context-menu-submenu');s.callback=null;break;case'html':e(s.html).appendTo(r);break;default:e.each([n,a],function(t,a){a.commands[c]=s;if(e.isFunction(s.callback)&&(a.callbacks[c]===undefined||n.type===undefined)){a.callbacks[c]=s.callback}});i(s).appendTo(r);break};if(s.type&&s.type!=='sub'&&s.type!=='html'&&s.type!=='cm_seperator'){l.on('focus',t.focusInput).on('blur',t.blurInput);if(s.events){l.on(s.events,n)}};if(s.icon){if(e.isFunction(s.icon)){s._icon=s.icon.call(this,this,r,c,s)}
else{if(typeof(s.icon)==='string'&&s.icon.substring(0,3)=='fa-'){s._icon=a.classNames.icon+' '+a.classNames.icon+'--fa fa '+s.icon}
else{s._icon=a.classNames.icon+' '+a.classNames.icon+'-'+s.icon}};r.addClass(s._icon)}};s.$input=l;s.$label=u;r.appendTo(n.$menu);if(!n.hasTypes&&e.support.eventSelectstart){r.on('selectstart.disableTextSelect',t.abortevent)}});if(!n.$node){n.$menu.css('display','none').addClass('context-menu-root')};n.$menu.appendTo(n.appendTo||document.body)},resize:function(t,n){var a;t.css({position:'absolute',display:'block'});t.data('width',(a=t.get(0)).getBoundingClientRect?Math.ceil(a.getBoundingClientRect().width):t.outerWidth()+1);t.css({position:'static',minWidth:'0px',maxWidth:'100000px'});t.find('> li > ul').each(function(){o.resize(e(this),!0)});if(!n){t.find('ul').addBack().css({position:'',display:'',minWidth:'',maxWidth:''}).outerWidth(function(){return e(this).data('width')})}},update:function(t,n){var a=this;if(n===undefined){n=t;o.resize(t.$menu)};t.$menu.children().each(function(){var s=e(this),c=s.data('contextMenuKey'),i=t.items[c],l=(e.isFunction(i.disabled)&&i.disabled.call(a,c,n))||i.disabled===!0,r;if(e.isFunction(i.visible)){r=i.visible.call(a,c,n)}
else if(typeof i.visible!=='undefined'){r=i.visible===!0}
else{r=!0};s[r?'show':'hide']();s[l?'addClass':'removeClass'](n.classNames.disabled);if(e.isFunction(i.icon)){s.removeClass(i._icon);i._icon=i.icon.call(this,a,s,c,i);s.addClass(i._icon)};if(i.type){s.find('input, select, textarea').prop('disabled',l);switch(i.type){case'text':case'textarea':i.$input.val(i.value||'');break;case'checkbox':case'radio':i.$input.val(i.value||'').prop('checked',!!i.selected);break;case'select':i.$input.val(i.selected||'');break}};if(i.$menu){o.update.call(a,i,n)}})},layer:function(n,a){var i=n.$layer=e('<div id="context-menu-layer" style="position:fixed; z-index:'+a+'; top:0; left:0; opacity: 0; filter: alpha(opacity=0); background-color: #000;"></div>').css({height:s.height(),width:s.width(),display:'block'}).data('contextMenuRoot',n).insertBefore(this).on('contextmenu',t.abortevent).on('mousedown',t.layerClick);if(document.body.style.maxWidth===undefined){i.css({'position':'absolute','height':e(document).height()})};return i}};function h(e){var i=e.split(/\s+/),a=[];for(var n=0,t;t=i[n];n++){t=t.charAt(0).toUpperCase();a.push(t)};return a};e.fn.contextMenu=function(n){var s=this,i=n;if(this.length>0){if(n===undefined){this.first().trigger('contextmenu')}
else if(n.x!==undefined&&n.y!==undefined){this.first().trigger(e.Event('contextmenu',{pageX:n.x,pageY:n.y,mouseButton:n.button}))}
else if(n==='hide'){var o=this.first().data('contextMenu')?this.first().data('contextMenu').$menu:null;if(o){o.trigger('contextmenu:hide')}}
else if(n==='destroy'){e.contextMenu('destroy',{context:this})}
else if(e.isPlainObject(n)){n.context=this;e.contextMenu('create',n)}
else if(n){this.removeClass('context-menu-disabled')}
else if(!n){this.addClass('context-menu-disabled')}}
else{e.each(a,function(){if(this.selector===s.selector){i.data=this;e.extend(i.data,{trigger:'demand'})}});t.contextmenu.call(i.target,i)};return this};e.contextMenu=function(n,s){if(typeof n!=='string'){s=n;n='create'};if(typeof s==='string'){s={selector:s}}
else if(s===undefined){s={}};var i=e.extend(!0,{},f,s||{});var p=e(document),d=p,h=!1;if(!i.context||!i.context.length){i.context=document}
else{d=e(i.context).first();i.context=d.get(0);h=!e(i.context).is(document)};switch(n){case'create':if(!i.selector){throw new Error('No selector specified')};if(i.selector.match(/.context-menu-(list|item|input)($|\s)/)){throw new Error('Cannot bind to selector "'+i.selector+'" as it contains a reserved className')};if(!i.build&&(!i.items||e.isEmptyObject(i.items))){throw new Error('No Items specified')};u++;i.ns='.contextMenu'+u;if(!h){c[i.selector]=i.ns};a[i.ns]=i;if(!i.trigger){i.trigger='right'};if(!l){var v=i.itemClickEvent==='click'?'click.contextMenu':'mouseup.contextMenu',x={'contextmenu:focus.contextMenu':t.focusItem,'contextmenu:blur.contextMenu':t.blurItem,'contextmenu.contextMenu':t.abortevent,'mouseenter.contextMenu':t.itemMouseenter,'mouseleave.contextMenu':t.itemMouseleave};x[v]=t.itemClick;p.on({'contextmenu:hide.contextMenu':t.hideMenu,'prevcommand.contextMenu':t.prevItem,'nextcommand.contextMenu':t.nextItem,'contextmenu.contextMenu':t.abortevent,'mouseenter.contextMenu':t.menuMouseenter,'mouseleave.contextMenu':t.menuMouseleave},'.context-menu-list').on('mouseup.contextMenu','.context-menu-input',t.inputClick).on(x,'.context-menu-item');l=!0};d.on('contextmenu'+i.ns,i.selector,i,t.contextmenu);if(h){d.on('remove'+i.ns,function(){e(this).contextMenu('destroy')})};if(i.trigger.indexOf('hover')>=0){d.on('mouseenter'+i.ns,i.selector,i,t.mouseenter).on('mouseleave'+i.ns,i.selector,i,t.mouseleave)};if(i.trigger.indexOf('left')>=0){d.on('click'+i.ns,i.selector,i,t.click)};if(!i.build){o.create(i)};break;case'destroy':var r;if(h){var g=i.context;e.each(a,function(t,n){if(!e(g).is(n.selector)){return!0};r=e('.context-menu-list').filter(':visible');if(r.length&&r.data().contextMenuRoot.$trigger.is(e(n.context).find(n.selector))){r.trigger('contextmenu:hide',{force:!0})};try{if(a[n.ns].$menu){a[n.ns].$menu.remove()};delete a[n.ns]}catch(i){a[n.ns]=null};e(n.context).off(n.ns);return!0})}
else if(!i.selector){p.off('.contextMenu .contextMenuAutoHide');e.each(a,function(t,n){e(n.context).off(n.ns)});c={};a={};u=0;l=!1;e('#context-menu-layer, .context-menu-list').remove()}
else if(c[i.selector]){r=e('.context-menu-list').filter(':visible');if(r.length&&r.data().contextMenuRoot.$trigger.is(i.selector)){r.trigger('contextmenu:hide',{force:!0})};try{if(a[c[i.selector]].$menu){a[c[i.selector]].$menu.remove()};delete a[c[i.selector]]}catch(m){a[c[i.selector]]=null};p.off(c[i.selector])};break;case'html5':if((!e.support.htmlCommand&&!e.support.htmlMenuitem)||(typeof s==='boolean'&&s)){e('menu[type="context"]').each(function(){if(this.id){e.contextMenu({selector:'[contextmenu='+this.id+']',items:e.contextMenu.fromMenu(this)})}}).css('display','none')};break;default:throw new Error('Unknown operation "'+n+'"')};return this};e.contextMenu.setInputValues=function(t,n){if(n===undefined){n={}};e.each(t.inputs,function(e,t){switch(t.type){case'text':case'textarea':t.value=n[e]||'';break;case'checkbox':t.selected=n[e]?!0:!1;break;case'radio':t.selected=(n[t.radio]||'')===t.value;break;case'select':t.selected=n[e]||'';break}})};e.contextMenu.getInputValues=function(t,n){if(n===undefined){n={}};e.each(t.inputs,function(e,t){switch(t.type){case'text':case'textarea':case'select':n[e]=t.$input.val();break;case'checkbox':n[e]=t.$input.prop('checked');break;case'radio':if(t.$input.prop('checked')){n[t.radio]=t.value};break}});return n};function r(t){return(t.id&&e('label[for="'+t.id+'"]').val())||t.name};function m(t,n,a){if(!a){a=0};n.each(function(){var n=e(this),o=this,c=this.nodeName.toLowerCase(),s,i;if(c==='label'&&n.find('input, textarea, select').length){s=n.text();n=n.children().first();o=n.get(0);c=o.nodeName.toLowerCase()};switch(c){case'menu':i={name:n.attr('label'),items:{}};a=m(i.items,n.children(),a);break;case'a':case'button':i={name:n.text(),disabled:!!n.attr('disabled'),callback:(function(){return function(){n.click()}})()};break;case'menuitem':case'command':switch(n.attr('type')){case undefined:case'command':case'menuitem':i={name:n.attr('label'),disabled:!!n.attr('disabled'),icon:n.attr('icon'),callback:(function(){return function(){n.click()}})()};break;case'checkbox':i={type:'checkbox',disabled:!!n.attr('disabled'),name:n.attr('label'),selected:!!n.attr('checked')};break;case'radio':i={type:'radio',disabled:!!n.attr('disabled'),name:n.attr('label'),radio:n.attr('radiogroup'),value:n.attr('id'),selected:!!n.attr('checked')};break;default:i=undefined};break;case'hr':i='-------';break;case'input':switch(n.attr('type')){case'text':i={type:'text',name:s||r(o),disabled:!!n.attr('disabled'),value:n.val()};break;case'checkbox':i={type:'checkbox',name:s||r(o),disabled:!!n.attr('disabled'),selected:!!n.attr('checked')};break;case'radio':i={type:'radio',name:s||r(o),disabled:!!n.attr('disabled'),radio:!!n.attr('name'),value:n.val(),selected:!!n.attr('checked')};break;default:i=undefined;break};break;case'select':i={type:'select',name:s||r(o),disabled:!!n.attr('disabled'),selected:n.val(),options:{}};n.children().each(function(){i.options[this.value]=e(this).text()});break;case'textarea':i={type:'textarea',name:s||r(o),disabled:!!n.attr('disabled'),value:n.val()};break;case'label':break;default:i={type:'html',html:n.clone(!0)};break};if(i){a++;t['key'+a]=i}});return a};e.contextMenu.fromMenu=function(t){var a=e(t),n={};m(n,a.children());return n};e.contextMenu.defaults=f;e.contextMenu.types=d;e.contextMenu.handle=t;e.contextMenu.op=o;e.contextMenu.menus=a});
(function(t){if(typeof define==="function"&&define.amd){define(["jquery"],t)}
else{t(jQuery)}}(function(t){t.ui=t.ui||{};var e=t.ui.version="1.12.0";(function(){var l,n,e=Math.max,i=Math.abs,f=Math.round,s=/left|center|right/,r=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,p=/^\w+/,c=/%$/,d=t.fn.position;n=function(){var i=t("<div>").css("position","absolute").appendTo("body").offset({top:1.5,left:1.5}),e=i.offset().top===1.5;i.remove();n=function(){return e};return e};function a(t,i,e){return[parseFloat(t[0])*(c.test(t[0])?i/100:1),parseFloat(t[1])*(c.test(t[1])?e/100:1)]};function o(i,e){return parseInt(t.css(i,e),10)||0};function u(i){var e=i[0];if(e.nodeType===9){return{width:i.width(),height:i.height(),offset:{top:0,left:0}}};if(t.isWindow(e)){return{width:i.width(),height:i.height(),offset:{top:i.scrollTop(),left:i.scrollLeft()}}};if(e.preventDefault){return{width:0,height:0,offset:{top:e.pageY,left:e.pageX}}};return{width:i.outerWidth(),height:i.outerHeight(),offset:i.offset()}};t.position={scrollbarWidth:function(){if(l!==undefined){return l};var o,e,i=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),n=i.children()[0];t("body").append(i);o=n.offsetWidth;i.css("overflow","scroll");e=n.offsetWidth;if(o===e){e=i[0].clientWidth};i.remove();return(l=o-e)},getScrollInfo:function(i){var e=i.isWindow||i.isDocument?"":i.element.css("overflow-x"),o=i.isWindow||i.isDocument?"":i.element.css("overflow-y"),l=e==="scroll"||(e==="auto"&&i.width<i.element[0].scrollWidth),n=o==="scroll"||(o==="auto"&&i.height<i.element[0].scrollHeight);return{width:n?t.position.scrollbarWidth():0,height:l?t.position.scrollbarWidth():0}},getWithinInfo:function(i){var e=t(i||window),o=t.isWindow(e[0]),l=!!e[0]&&e[0].nodeType===9,n=!o&&!l;return{element:e,isWindow:o,isDocument:l,offset:n?t(i).offset():{left:0,top:0},scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop(),width:e.outerWidth(),height:e.outerHeight()}}};t.fn.position=function(l){if(!l||!l.of){return d.apply(this,arguments)};l=t.extend({},l);var W,c,g,w,m,y,H=t(l.of),T=t.position.getWithinInfo(l.within),x=t.position.getScrollInfo(T),v=(l.collision||"flip").split(" "),b={};y=u(H);if(H[0].preventDefault){l.at="left top"};c=y.width;g=y.height;w=y.offset;m=t.extend({},w);t.each(["my","at"],function(){var t=(l[this]||"").split(" "),i,e;if(t.length===1){t=s.test(t[0])?t.concat(["center"]):r.test(t[0])?["center"].concat(t):["center","center"]};t[0]=s.test(t[0])?t[0]:"center";t[1]=r.test(t[1])?t[1]:"center";i=h.exec(t[0]);e=h.exec(t[1]);b[this]=[i?i[0]:0,e?e[0]:0];l[this]=[p.exec(t[0])[0],p.exec(t[1])[0]]});if(v.length===1){v[1]=v[0]};if(l.at[0]==="right"){m.left+=c}
else if(l.at[0]==="center"){m.left+=c/2};if(l.at[1]==="bottom"){m.top+=g}
else if(l.at[1]==="center"){m.top+=g/2};W=a(b.at,c,g);m.left+=W[0];m.top+=W[1];return this.each(function(){var u,y,r=t(this),h=r.outerWidth(),p=r.outerHeight(),L=o(this,"marginLeft"),P=o(this,"marginTop"),D=h+L+o(this,"marginRight")+x.width,I=p+P+o(this,"marginBottom")+x.height,s=t.extend({},m),d=a(b.my,r.outerWidth(),r.outerHeight());if(l.my[0]==="right"){s.left-=h}
else if(l.my[0]==="center"){s.left-=h/2};if(l.my[1]==="bottom"){s.top-=p}
else if(l.my[1]==="center"){s.top-=p/2};s.left+=d[0];s.top+=d[1];if(!n()){s.left=f(s.left);s.top=f(s.top)};u={marginLeft:L,marginTop:P};t.each(["left","top"],function(i,e){if(t.ui.position[v[i]]){t.ui.position[v[i]][e](s,{targetWidth:c,targetHeight:g,elemWidth:h,elemHeight:p,collisionPosition:u,collisionWidth:D,collisionHeight:I,offset:[W[0]+d[0],W[1]+d[1]],my:l.my,at:l.at,within:T,elem:r})}});if(l.using){y=function(t){var n=w.left-s.left,a=n+c-h,f=w.top-s.top,d=f+g-p,o={target:{element:H,left:w.left,top:w.top,width:c,height:g},element:{element:r,left:s.left,top:s.top,width:h,height:p},horizontal:a<0?"left":n>0?"right":"center",vertical:d<0?"top":f>0?"bottom":"middle"};if(c<h&&i(n+a)<c){o.horizontal="center"};if(g<p&&i(f+d)<g){o.vertical="middle"};if(e(i(n),i(a))>e(i(f),i(d))){o.important="horizontal"}
else{o.important="vertical"};l.using.call(this,t,o)}};r.offset(t.extend(s,{using:y}))})};t.ui.position={fit:{left:function(t,i){var f=i.within,l=f.isWindow?f.scrollLeft:f.offset.left,s=f.width,r=t.left-i.collisionPosition.marginLeft,o=l-r,n=r+i.collisionWidth-s-l,h;if(i.collisionWidth>s){if(o>0&&n<=0){h=t.left+o+i.collisionWidth-s-l;t.left+=o-h}
else if(n>0&&o<=0){t.left=l}
else{if(o>n){t.left=l+s-i.collisionWidth}
else{t.left=l}}}
else if(o>0){t.left+=o}
else if(n>0){t.left-=n}
else{t.left=e(t.left-r,t.left)}},top:function(t,i){var s=i.within,l=s.isWindow?s.scrollTop:s.offset.top,f=i.within.height,r=t.top-i.collisionPosition.marginTop,o=l-r,n=r+i.collisionHeight-f-l,h;if(i.collisionHeight>f){if(o>0&&n<=0){h=t.top+o+i.collisionHeight-f-l;t.top+=o-h}
else if(n>0&&o<=0){t.top=l}
else{if(o>n){t.top=l+f-i.collisionHeight}
else{t.top=l}}}
else if(o>0){t.top+=o}
else if(n>0){t.top-=n}
else{t.top=e(t.top-r,t.top)}}},flip:{left:function(e,t){var o=t.within,u=o.offset.left+o.scrollLeft,p=o.width,s=o.isWindow?o.scrollLeft:o.offset.left,c=e.left-t.collisionPosition.marginLeft,a=c-s,d=c+t.collisionWidth-p-s,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,n=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,f=-2*t.offset[0],r,h;if(a<0){r=e.left+l+n+f+t.collisionWidth-p-u;if(r<0||r<i(a)){e.left+=l+n+f}}
else if(d>0){h=e.left-t.collisionPosition.marginLeft+l+n+f-s;if(h>0||i(h)<d){e.left+=l+n+f}}},top:function(e,t){var o=t.within,u=o.offset.top+o.scrollTop,p=o.height,s=o.isWindow?o.scrollTop:o.offset.top,c=e.top-t.collisionPosition.marginTop,a=c-s,d=c+t.collisionHeight-p-s,g=t.my[1]==="top",l=g?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,n=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,f=-2*t.offset[1],r,h;if(a<0){h=e.top+l+n+f+t.collisionHeight-p-u;if(h<0||h<i(a)){e.top+=l+n+f}}
else if(d>0){r=e.top-t.collisionPosition.marginTop+l+n+f-s;if(r>0||i(r)<d){e.top+=l+n+f}}}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments);t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments);t.ui.position.fit.top.apply(this,arguments)}}}})();var i=t.ui.position}));